webpackJsonp([1],{0:function(t,e,n){n("j1ja"),t.exports=n("NHnr")},"4dKo":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),r={name:"App",watch:{$route:function(t){console.log(t),this.setTitle()}},created:function(){this.setTitle()},methods:{setTitle:function(){var t="";t=""!==this.$route.meta.title?this.$route.meta.title+" | Event2019Dec":"Event2019Dec",document.title=t}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")(r,i,!1,function(t){n("ZCHQ")},null,null).exports,c=n("18Sv"),a=n.n(c),u=n("K/Lq"),l=n.n(u),h=n("TXmL"),v=(n("MU8w"),n("/ocq")),d={components:{},data:function(){return{name:"",processLock:!1}},methods:{entry:function(){var t=this;console.log("entry"),console.log("name",this.name),this.processLock=!0;var e={name:this.name};this.$store.dispatch("quiz/entry",e).then(function(){var e=t;setTimeout(function(){e.processLock=!1},1e3),t.$router.push({name:"Question",params:{no:1}})}).catch(function(e){console.log(e),t.processLock=!1})}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-main-container"},[t._m(0),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",name:"nickname",placeholder:"なまえを入力"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),n("div",{staticClass:"attention"},[t._v("誰だか分かる名称を入力しよう(苗字推奨)")]),t._v(" "),""===t.name||t.processLock?n("div",{staticClass:"button-disable"},[t._v("開始")]):n("div",{staticClass:"button",on:{click:t.entry}},[t._v("開始")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[this._v("\n    2019 忘年会"),e("br"),this._v("\n    クイズイベント"),e("br")])}]};var f=n("VU/8")(d,p,!1,function(t){n("4dKo")},"data-v-69fb3688",null).exports,m={components:{},data:function(){return{standby:!1,id:"",name:"",processLock:!1,progressCheckId:null,progressCheckLock:!1,currentNo:0,currentStatus:"",quiz:{},choiceData:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},startTime:0,pramNo:0,ansSend:null}},created:function(){console.log("created")},mounted:function(){console.log("mounted"),this.initialize()},destroyed:function(){console.log("destroyed"),clearInterval(this.progressCheckId)},watch:{$route:function(){this.initialize()}},methods:{selected:function(t){return 0===this.choiceData[this.currentNo]?"choice-ok":this.choiceData[this.currentNo]===t?"selected":"not-selected"},choice:function(t){var e=this;console.log(t),console.log(this.choiceData[this.currentNo]),this.choiceData[this.currentNo]=t;var n=this.microUnixtime()-this.startTime,s={};s.id=this.id,s.n=this.currentNo,s.a=t,s.t=n,console.log(s),this.ansSend="sending",this.$store.dispatch("quiz/choice",s).then(function(){e.ansSend="finish"}).catch(function(t){console.log(t)})},microUnixtime:function(){return(new Date).getTime()},initialize:function(){var t=this;if(console.log("initialize"),this.ansSend=!1,this.id=this.$store.getters["quiz/id"],this.name=this.$store.getters["quiz/name"],null===this.id)return console.warn("id is null"),void this.$router.push({name:"Entry"});this.pramNo=this.$route.params.no,this.pramNo=parseInt(this.pramNo),console.log("pramNo",this.pramNo);var e=this;this.progressCheckId=setInterval(function(){console.log("interval"),e.progressCheck()},1e3),this.$store.dispatch("quiz/getQuiz").then(function(){t.quiz=t.$store.getters["quiz/quizFront"],t.startTime=t.microUnixtime(),t.standby=!0}).catch(function(t){console.log(t)})},progressCheck:function(){var t=this;console.log("progressCheck"),this.progressCheckLock?console.log("interval-skip",this.progressCheckLock):(this.progressCheckLock=!0,this.$store.dispatch("quiz/getProgress").then(function(){t.currentNo=t.$store.getters["quiz/currentNo"],t.currentStatus=t.$store.getters["quiz/currentStatus"],t.currentNo=parseInt(t.currentNo),t.pramNo!==t.currentNo&&(console.log("change",t.pramNo,t.currentNo),t.$router.push({name:"Question",params:{no:t.currentNo}})),t.progressCheckLock=!1}).catch(function(e){console.log(e),t.progressCheckLock=!1}))}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-main-container"},[t.standby?n("div",[0===t.currentNo?n("div",{staticClass:"please-wait"},[t._v("\n      まもなく開始\n      "),n("div",{staticClass:"please-wait-sub"},[t._v("Please Wait...")])]):n("div",["wait"===t.currentStatus?n("div",{staticClass:"wait"},[t._v("\n        Question. "+t._s(t.currentNo)+"\n      ")]):"open"===t.currentStatus?n("div",{staticClass:"open"},[n("div",{staticClass:"q-header"},[t._v("Question. "+t._s(t.currentNo))]),t._v(" "),n("div",{staticClass:"q-text"},[t._v(t._s(t.quiz[t.currentNo].q))]),t._v(" "),n("div",[n("div",{staticClass:"choice",class:t.selected(1),on:{click:function(e){t.choice(1)}}},[t._v(t._s(t.quiz[t.currentNo].c[1]))]),t._v(" "),n("div",{staticClass:"choice",class:t.selected(2),on:{click:function(e){t.choice(2)}}},[t._v(t._s(t.quiz[t.currentNo].c[2]))]),t._v(" "),n("div",{staticClass:"choice",class:t.selected(3),on:{click:function(e){t.choice(3)}}},[t._v(t._s(t.quiz[t.currentNo].c[3]))]),t._v(" "),n("div",{staticClass:"choice",class:t.selected(4),on:{click:function(e){t.choice(4)}}},[t._v(t._s(t.quiz[t.currentNo].c[4]))])]),t._v(" "),n("div",{staticClass:"connect"},["sending"===t.ansSend?n("div",[t._v("回答を送信中....")]):t._e(),t._v(" "),"finish"===t.ansSend?n("div",[t._v("回答を送信しました")]):t._e()])]):"close"===t.currentStatus?n("div",{staticClass:"close"},[n("div",{staticClass:"q-header"},[t._v("Question. "+t._s(t.currentNo))]),t._v(" "),n("div",{staticClass:"attention"},[t._v("回答を締め切りました")])]):"result"===t.currentStatus?n("div",{staticClass:"result"},[n("div",{staticClass:"q-header"},[t._v("Question. "+t._s(t.currentNo))]),t._v(" "),n("div",{staticClass:"attention"},[t._v("\n          モニターに注目！！\n        ")])]):"finish"===t.currentStatus?n("div",{staticClass:"result"},[n("div",{staticClass:"attention"},[t._v("\n          まもなくランキング発表！\n        ")])]):t._e()])]):t._e(),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"debug"},[t._v("\n    id:"+t._s(t.id)),n("br"),t._v("\n    name:"+t._s(t.name)),n("br"),t._v("\n    currentNo:"+t._s(t.currentNo)),n("br"),t._v("\n    currentStatus:"+t._s(t.currentStatus)),n("br"),t._v("\n    startTime:"+t._s(t.startTime)),n("br"),t._v("\n    "+t._s(t.choiceData)+"\n  ")])])},staticRenderFns:[]};var _=n("VU/8")(m,g,!1,function(t){n("Yg48")},"data-v-87dc3da0",null).exports,C={components:{},data:function(){return{pollingControlStatus:!0,intervalId:null,intervalCountdownId:null,processLock:!1,currentNo:0,currentStatus:"",members:{},quiz:{},ans:{},ranking:{},countDown:0,maxCount:150}},created:function(){var t=this;this.polling();var e=this;null===this.intervalId&&(this.intervalId=setInterval(function(){e.polling()},1e3)),null===this.intervalCountdownId&&(this.intervalCountdownId=setInterval(function(){t.countDown=t.countDown-1},100))},destroyed:function(){clearInterval(this.intervalId),clearInterval(this.intervalCountdownId)},computed:{resetUrl:function(){return
"http://your.domain.example.com/reset.php"},countDownText:function(){var t=this.countDown;return t<=0?t=0:t/=10,t%1==0&&(t+=".0"),t}},methods:{finish:function(){10===this.currentNo?"finish"===this.currentStatus?this.$router.push({name:"Result"}):console.log("currentStatus not finish"):console.log("currentNo not 10")},open:function(){"wait"===this.currentStatus?this.nextProgress():console.log("currentStatus not wait")},close:function(){"open"===this.currentStatus?this.nextProgress():console.log("currentStatus not open")},result:function(){"close"===this.currentStatus?this.nextProgress():console.log("currentStatus not close")},next:function(){"result"===this.currentStatus?this.nextProgress():console.log("currentStatus not result")},start:function(){0===this.currentNo?this.nextProgress():console.log("currentNo not 0")},nextProgress:function(){var t=this;this.$store.dispatch("quiz/nextProgress").then(function(){t.polling(),t.processLock=!1}).catch(function(e){console.log(e),t.processLock=!1})},polling:function(){var t=this;console.log("polling"),this.processLock?console.log("polling-skip"):!1!==this.pollingControlStatus?(this.processLock=!0,this.$store.dispatch("quiz/getOverView").then(function(){t.currentNo=t.$store.getters["quiz/currentNo"];var e=t.$store.getters["quiz/currentStatus"];e!==t.currentStatus&&(t.currentStatus=e,"open"===e&&(console.log("<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<"),t.countDown=t.maxCount)),t.members=t.$store.getters["quiz/members"],t.quiz=t.$store.getters["quiz/quiz"],t.ans=t.$store.getters["quiz/ans"],t.ranking=t.$store.getters["quiz/ranking"],t.processLock=!1}).catch(function(e){console.log(e),t.processLock=!1})):console.log("polling-stop")},pollingControl:function(){this.pollingControlStatus?this.pollingControlStatus=!1:this.pollingControlStatus=!0},memberStatus:function(t){return"result"===this.currentStatus?this.ans[this.currentNo][t].result?"correct":"incorrect":"open"===this.currentStatus?0!==this.ans[this.currentNo][t].a?"entry":"not-entry":"close"===this.currentStatus?0!==this.ans[this.currentNo][t].a?"entry":"not-choice":""},statusText:function(){return"wait"===this.currentStatus?"wait":"open"===this.currentStatus?"回答受付中":"close"===this.currentStatus?"回答締め切り":"result"===this.currentStatus?"":void 0},answer:function(t){return this.quiz[this.currentNo].a===t?"correct-box":"incorrect-box"}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fullHD"},[n("div",{staticClass:"progress-control"},[0===t.currentNo?n("div",{staticClass:"button",on:{click:t.start}},[t._v("開始")]):10===t.currentNo&&"finish"===t.currentStatus?n("div",{staticClass:"button",on:{click:t.finish}},[t._v("最終結果発表")]):n("div",["wait"===t.currentStatus?n("div",{staticClass:"button",on:{click:t.open}},[t._v("回答受付")]):t._e(),t._v(" "),"open"===t.currentStatus?n("div",{staticClass:"button",on:{click:t.close}},[t._v("回答終了")]):t._e(),t._v(" "),"close"===t.currentStatus?n("div",{staticClass:"button",on:{click:t.result}},[t._v("正解発表")]):t._e(),t._v(" "),"result"===t.currentStatus?n("div",{staticClass:"button",on:{click:t.next}},[t._v("次の問題")]):t._e()])]),t._v(" "),0!==t.currentNo?n("div",[n("div",{staticClass:"header"},[n("div",{staticClass:"number"},[t._v("No "+t._s(t.currentNo)+"\n        "),n("div",{staticClass:"status-text"},[t._v("\n          "+t._s(t.statusText())+"\n        ")])]),t._v(" "),n("div",{staticClass:"q-text"},["wait"!==t.currentStatus?n("div",[t._v("\n          "+t._s(t.quiz[t.currentNo].q)),n("br"),t._v(" "),"open"===t.currentStatus&&t.countDown<=0?n("div",[t._v("Time up!")]):"open"===t.currentStatus?n("div",[t._v("回答時間 残り: "+t._s(t.countDownText)+"秒")]):t._e()]):n("div",[t._v("Please wait.")])])]),t._v(" "),n("div",{staticClass:"choice-container"},["result"===t.currentStatus?n("div",{staticClass:"choice-result"},[n("div",{staticClass:"item",class:t.answer(1)},[t._v("1. "+t._s(t.quiz[t.currentNo].c[1]))]),t._v(" "),n("div",{staticClass:"item",class:t.answer(2)},[t._v("2. "+t._s(t.quiz[t.currentNo].c[2]))]),t._v(" "),n("div",{staticClass:"item",class:t.answer(3)},[t._v("3. "+t._s(t.quiz[t.currentNo].c[3]))]),t._v(" "),n("div",{staticClass:"item",class:t.answer(4)},[t._v("4. "+t._s(t.quiz[t.currentNo].c[4]))])]):"wait"!==t.currentStatus?n("div",{staticClass:"choice"},[n("div",{staticClass:"item"},[t._v("1. "+t._s(t.quiz[t.currentNo].c[1]))]),t._v(" "),n("div",{staticClass:"item"},[t._v("2. "+t._s(t.quiz[t.currentNo].c[2]))]),t._v(" "),n("div",{staticClass:"item"},[t._v("3. "+t._s(t.quiz[t.currentNo].c[3]))]),t._v(" "),n("div",{staticClass:"item"},[t._v("4. "+t._s(t.quiz[t.currentNo].c[4]))])]):t._e()])]):n("div",{staticClass:"entry-text"},[t._v("エントリー受付中")]),t._v(" "),n("div",{staticClass:"main-list"},t._l(t.members,function(e,s){return n("div",{key:"m"+s,staticClass:"item"},[n("div",{staticClass:"item-box",class:t.memberStatus(s)},[n("div",{staticClass:"name"},[t._v(t._s(e))]),t._v(" "),t.currentNo>=1?n("div",[0!==t.ans[t.currentNo][s].a?n("div",["close"===t.currentStatus||"result"===t.currentStatus?n("div",{staticClass:"choice-text"},[t._v("\n              "+t._s(t.ans[t.currentNo][s].a)+"\n            ")]):0!==t.ans[t.currentNo][s].a?n("div",[t._v("回答済")]):t._e()]):"wait"===t.currentStatus?n("div"):n("div",{staticClass:"choice-none-text"},[t._v("\n            未回答\n          ")])]):t._e()])])})),t._v(" "),n("div",{staticClass:"debug"},[t._v("\n    currentNo: "+t._s(t.currentNo)+" - currentStatus: "+t._s(t.currentStatus)+" "),n("span",{on:{click:t.pollingControl}},[t._v("pollingコントロール")]),t._v("\n    pollingControlStatus: "+t._s(t.pollingControlStatus)+"\n    "),n("a",{attrs:{href:t.resetUrl,target:"_blank"}},[t._v("リセット")]),t._v(" "),n("br")])])},staticRenderFns:[]};var k=n("VU/8")(C,S,!1,function(t){n("S6Ru")},"data-v-631693f6",null).exports,q=n("fZjL"),N=n.n(q),w={components:{},data:function(){return{members:{},quiz:{},ans:{},ranking:[],result:[]}},created:function(){this.getData()},methods:{rankingEffect:function(t){return 1===t?"rank1":2===t?"rank2":3===t?"rank3":t<=5?"rank5":""},name:function(t){if(void 0!==this.members[t])return this.members[t]},next:function(){if(console.log(this.ranking.length),!(this.ranking.length<=0)){var t=this.ranking.pop();this.result.unshift(t)}},getData:function(){var t=this;this.$store.dispatch("quiz/getOverView").then(function(){t.currentNo=t.$store.getters["quiz/currentNo"],t.currentStatus=t.$store.getters["quiz/currentStatus"],t.members=t.$store.getters["quiz/members"];var e=t.$store.getters["quiz/ranking"],n=[];N()(e).forEach(function(t){console.log(e[t]),n.push(e[t])}),t.ranking=n}).catch(function(t){console.log(t)})}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fullHD"},[n("div",{staticClass:"progress-control"},[n("div",{staticClass:"button",on:{click:t.next}},[t._v("Next")])]),t._v(" "),n("div",{staticClass:"header"},[t._v("最終結果発表")]),t._v(" "),n("div",t._l(t.result,function(e,s){return n("div",{key:"m"+s},[n("div",{staticClass:"ranking-container",class:t.rankingEffect(e.r)},[n("span",{staticClass:"rank-no"},[t._v(t._s(e.r)+"位")]),t._v(t._s(t.name(e.id))+"\n      ")])])}))])},staticRenderFns:[]};var b=n("VU/8")(w,z,!1,function(t){n("nQp3")},"data-v-8e8c99c6",null).exports;s.a.use(v.a);var x=new v.a({base:".",routes:[{path:"/monitor",name:"Monitor",component:k,meta:{title:"Monitor"}},{path:"/result",name:"Result",component:b,meta:{title:"Result"}},{path:"/",name:"Entry",component:f,meta:{title:"Entry"}},{path:"/question/:no(\\d+)",name:"Question",component:_,meta:{title:"Question"}}],scrollBehavior:function(t,e,n){return n||{x:0,y:0}}}),y=(n("j1ja"),n("NYxO")),$=n("424j"),T=n("//Fk"),E=n.n(T),I=n("mtWM"),D=n.n(I),L={name:"http",get:function(t,e){return D.a.get(t,{params:e})},post:function(t,e,n){return n={},D.a.post(t,e,n)},patch:function(t,e,n){return n={},D.a.patch(t,e,n)},put:function(t,e,n){return n={},D.a.put(t,e,n)},delete:function(t,e){return D.a.delete(t,e)},supplyCsrfHeader:function(t){},install:function(t,e){t.prototype.$http=L}},P=L,U={namespaced:!0,state:{name:null,id:null,currentNo:null,currentStatus:null,members:{},quiz:{},ans:{},ranking:{},quizFront:{}},getters:{id:function(t){return t.id},name:function(t){return t.name},currentNo:function(t){return t.currentNo},currentStatus:function(t){return t.currentStatus},members:function(t){return t.members},quiz:function(t){return t.quiz},ans:function(t){return t.ans},ranking:function(t){return t.ranking},quizFront:function(t){return t.quizFront}},actions:{entry:function(t,e){return new E.a(function(n,s){if(void 0===e.name){s(new Error("name is undefined"))}P.get(
"http://your.domain.example.com/api_user_entry.php",e).then(function(e){if(console.log("response: ",e),200===e.data.STATUS)t.commit("saveEntry",e.data.data),n();else{s(new Error("API Error"))}}).catch(function(t){s(t)})})},getProgress:function(t){return new E.a(function(e,n){   P.get(
"http://your.domain.example.com/api_user_progress.php").then(function(s){if(console.log("response: ",s),200===s.data.STATUS)t.commit("saveProgress",s.data.data),e();else{n(new Error("API Error"))}}).catch(function(t){n(t)})})},getOverView:function(t){return new E.a(function(e,n){P.get(
"http://your.domain.example.com/api_monitor_overview.php").then(function(s){if(console.log("response: ",s),200===s.data.STATUS)t.commit("saveOverView",s.data.data),e();else{n(new Error("API Error"))}}).catch(function(t){n(t)})})},nextProgress:function(t){return new E.a(function(e,n){P.get(
"http://your.domain.example.com/api_monitor_next_progress.php").then(function(s){if(console.log("response: ",s),200===s.data.STATUS)t.commit("saveOverView",s.data.data),e();else{n(new Error("API Error"))}}).catch(function(t){n(t)})})},getQuiz:function(t){return new E.a(function(e,n){P.get(
"http://your.domain.example.com/api_user_quiz.php").then(function(s){if(console.log("response: ",s),200===s.data.STATUS)t.commit("saveQuiz",s.data.data),e();else{n(new Error("API Error"))}}).catch(function(t){n(t)})})},choice:function(t,e){return new E.a(function(t,n){P.get(
"http://your.domain.example.com/api_user_answer.php",e).then(function(e){if(console.log("response: ",e),200===e.data.STATUS)t();else{n(new Error("API Error"))}}).catch(function(t){n(t)})})}},mutations:{saveEntry:function(t,e){console.log(e),t.id=e.id,t.name=e.name},saveProgress:function(t,e){console.log(e),t.currentNo=e.progress.current,t.currentStatus=e.progress.status},saveOverView:function(t,e){console.log(e),t.members=e.members,t.quiz=e.quiz,t.ans=e.ans,t.ranking=e.ranking,t.currentNo=e.progress.current,t.currentStatus=e.progress.status},saveQuiz:function(t,e){console.log(e),t.quizFront=e.quiz}}};s.a.use(y.a);var Q=new y.a.Store({plugins:[Object($.a)()],modules:{quiz:U}}),A={install:function(t,e){},unixtime:function(){var t=(new Date).getTime(),e=Math.floor(t/1e3);return e}},V={render:function(){var t=this.$createElement,e=this._self._c||t;return this.callTypeIco?e("i",{class:this.iconSettingsClass,style:this.iconSettingsStyle}):e("i",{class:this.iconCss,style:this.style})},staticRenderFns:[]},F=n("VU/8")({props:["set","i","c","pr","pl","fs"],computed:{callTypeIco:function(){return void 0!==this.set},iconSettingsClass:function(){return this.set.class},iconSettingsStyle:function(){return this.set.style},iconCss:function(){switch(this.i){case"bars":return"fas fa-bars";case"caret-square-right":return"fas fa-caret-square-right";case"checkbox-none":return"fas fa-square";case"checkbox-checked":return"fas fa-check-square";case"share-square":return"fas fa-share-square";case"edit":return"fas fa-edit";case"tasks":return"fas fa-tasks";case"plus-square":return"fas fa-plus-square";case"minus-circle":return"fas fa-minus-circle";case"toggle-on":return"fas fa-toggle-on";case"user-check":return"fas fa-user-check";case"check":return"far fa-check-square";case"bookmark":return"far fa-bookmark";default:return"far fa-question-circle"}},style:function(){var t=[];return this.pr?t.push("padding-right:"+this.pr+"px"):t.push("padding-right:5px"),this.pl&&t.push("padding-left:"+this.pr+"px"),this.c&&t.push("color:"+this.c),this.fs&&t.push("font-size:"+this.fs+"px"),t.join(";")}}},V,!1,null,null,null).exports,j=n("S8TV");s.a.config.productionTip=!1,s.a.use(a.a),s.a.use(l.a),s.a.use(h.a),s.a.use(A),s.a.component("I",F);var R=new h.a({locale:"ja",messages:j});x.beforeEach(function(t,e,n){n()}),new s.a({el:"#app",i18n:R,router:x,store:Q,components:{App:o},template:"<App/>"})},S6Ru:function(t,e){},S8TV:function(t,e){t.exports={ja:{},en:{}}},Yg48:function(t,e){},ZCHQ:function(t,e){},nQp3:function(t,e){}},[0]);
//# sourceMappingURL=app.704153436ef4add873f8.js.map
